= gcp_vertex_ai_embeddings
:type: processor
:status: experimental
:categories: ["AI"]



////
     THIS FILE IS AUTOGENERATED!

     To make changes, edit the corresponding source file under:

     https://github.com/redpanda-data/connect/tree/main/internal/impl/<provider>.

     And:

     https://github.com/redpanda-data/connect/tree/main/cmd/tools/docs_gen/templates/plugin.adoc.tmpl
////

// Â© 2024 Redpanda Data Inc.


component_type_dropdown::[]


Generates vector embeddings to represent input text, using the Vertex AI API.

Introduced in version 4.37.0.


[tabs]
======
Common::
+
--

```yml
# Common config fields, showing default values
label: ""
gcp_vertex_ai_embeddings:
  project: "" # No default (required)
  location: us-central1
  model: text-embedding-004 # No default (required)
  task_type: RETRIEVAL_DOCUMENT
  text: "" # No default (optional)
  output_dimensions: 0 # No default (optional)
  credentials_json: ""
```

--
Advanced::
+
--

```yml
# All config fields, showing default values
label: ""
gcp_vertex_ai_embeddings:
  project: "" # No default (required)
  location: us-central1
  model: text-embedding-004 # No default (required)
  task_type: RETRIEVAL_DOCUMENT
  text: "" # No default (optional)
  output_dimensions: 0 # No default (optional)
  credentials_path: "" # No default (optional)
  credentials_json: ""
  credentials:
    type: service_account
    project_id: "" # No default (required)
    private_key_id: "" # No default (required)
    private_key: "" # No default (required)
    client_email: "" # No default (required)
    client_id: "" # No default (required)
    auth_uri: https://accounts.google.com/o/oauth2/auth
    token_uri: https://oauth2.googleapis.com/token
    auth_provider_x509_cert_url: https://www.googleapis.com/oauth2/v1/certs
    client_x509_cert_url: "" # No default (required)
```

--
======

This processor sends text strings to the Vertex AI API, which generates vector embeddings. By default, the processor submits the entire payload of each message as a string, unless you use the `text` configuration field to customize it.

For more information, see the https://cloud.google.com/vertex-ai/generative-ai/docs/embeddings[Vertex AI documentation^].

== Fields

=== `project`

GCP project ID to use


*Type*: `string`


=== `location`

The location of the model.


*Type*: `string`

*Default*: `"us-central1"`

=== `model`

The name of the LLM to use. For a full list of models, see the https://console.cloud.google.com/vertex-ai/model-garden[Vertex AI Model Garden].


*Type*: `string`


```yml
# Examples

model: text-embedding-004

model: text-multilingual-embedding-002
```

=== `task_type`

The way to optimize embeddings that the model generates for specific use cases.


*Type*: `string`

*Default*: `"RETRIEVAL_DOCUMENT"`

|===
| Option | Summary

| `CLASSIFICATION`
| optimize for being able classify texts according to preset labels
| `CLUSTERING`
| optimize for clustering texts based on their similarities
| `FACT_VERIFICATION`
| optimize for queries that are proving or disproving a fact such as "apples grow underground"
| `QUESTION_ANSWERING`
| optimize for search proper questions such as "Why is the sky blue?"
| `RETRIEVAL_DOCUMENT`
| optimize for documents that will be searched (also known as a corpus)
| `RETRIEVAL_QUERY`
| optimize for queries such as "What is the best fish recipe?" or "best restaurant in Chicago"
| `SEMANTIC_SIMILARITY`
| optimize for text similarity

|===

=== `text`

The text you want to compute vector embeddings for. By default, the processor submits the entire payload as a string.
This field supports xref:configuration:interpolation.adoc#bloblang-queries[interpolation functions].


*Type*: `string`


=== `output_dimensions`

The maximum length for the output embedding size. If set, the output embeddings will be truncated to this size.


*Type*: `int`


=== `credentials_path`

The path for custom credentials of Google Cloud. This is checked first and takes precedence over other credential methods.
[CAUTION]
====
This field contains sensitive information that usually shouldn't be added to a config directly, read our xref:configuration:secrets.adoc[secrets page for more info].
====



*Type*: `string`


=== `credentials_json`

An optional field to set Google Service Account Credentials json. This is checked second, after credentials_path.
[CAUTION]
====
This field contains sensitive information that usually shouldn't be added to a config directly, read our xref:configuration:secrets.adoc[secrets page for more info].
====



*Type*: `string`

*Default*: `""`

=== `credentials`

Optional manual configuration of Google Cloud credentials to use. This is checked last, after credentials_path and credentials_json. More information can be found [in this document](/docs/guides/cloud/gcp).
[CAUTION]
====
This field contains sensitive information that usually shouldn't be added to a config directly, read our xref:configuration:secrets.adoc[secrets page for more info].
====



*Type*: `object`


=== `credentials.type`

The type of the account (always "service_account" for a service account).


*Type*: `string`

*Default*: `"service_account"`

=== `credentials.project_id`

The ID of your Google Cloud project.


*Type*: `string`


=== `credentials.private_key_id`

The ID of your private key.
[CAUTION]
====
This field contains sensitive information that usually shouldn't be added to a config directly, read our xref:configuration:secrets.adoc[secrets page for more info].
====



*Type*: `string`


=== `credentials.private_key`

Your private key.
[CAUTION]
====
This field contains sensitive information that usually shouldn't be added to a config directly, read our xref:configuration:secrets.adoc[secrets page for more info].
====



*Type*: `string`


=== `credentials.client_email`

The email address of your service account.
[CAUTION]
====
This field contains sensitive information that usually shouldn't be added to a config directly, read our xref:configuration:secrets.adoc[secrets page for more info].
====



*Type*: `string`


=== `credentials.client_id`

The ID of your service account.
[CAUTION]
====
This field contains sensitive information that usually shouldn't be added to a config directly, read our xref:configuration:secrets.adoc[secrets page for more info].
====



*Type*: `string`


=== `credentials.auth_uri`

The URI for OAuth2 authorization.


*Type*: `string`

*Default*: `"https://accounts.google.com/o/oauth2/auth"`

=== `credentials.token_uri`

The URI that provides the OAuth2 tokens.


*Type*: `string`

*Default*: `"https://oauth2.googleapis.com/token"`

=== `credentials.auth_provider_x509_cert_url`

The URL of the authentication provider's X.509 public key certificate.


*Type*: `string`

*Default*: `"https://www.googleapis.com/oauth2/v1/certs"`

=== `credentials.client_x509_cert_url`

The URL of the service account's X.509 public key certificate. Typically: https://www.googleapis.com/robot/v1/metadata/x509/your-service-account-email%40your-project-id.iam.gserviceaccount.com
[CAUTION]
====
This field contains sensitive information that usually shouldn't be added to a config directly, read our xref:configuration:secrets.adoc[secrets page for more info].
====



*Type*: `string`



