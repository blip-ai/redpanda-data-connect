= gcp_pubsub
:type: input
:status: stable
:categories: ["Services","GCP"]



////
     THIS FILE IS AUTOGENERATED!

     To make changes, edit the corresponding source file under:

     https://github.com/redpanda-data/connect/tree/main/internal/impl/<provider>.

     And:

     https://github.com/redpanda-data/connect/tree/main/cmd/tools/docs_gen/templates/plugin.adoc.tmpl
////

// Â© 2024 Redpanda Data Inc.


component_type_dropdown::[]


Consumes messages from a GCP Cloud Pub/Sub subscription.


[tabs]
======
Common::
+
--

```yml
# Common config fields, showing default values
input:
  label: ""
  gcp_pubsub:
    project: "" # No default (required)
    subscription: "" # No default (required)
    endpoint: ""
    sync: false
    max_outstanding_messages: 1000
    max_outstanding_bytes: 1e+09
    credentials_json: ""
```

--
Advanced::
+
--

```yml
# All config fields, showing default values
input:
  label: ""
  gcp_pubsub:
    project: "" # No default (required)
    subscription: "" # No default (required)
    endpoint: ""
    sync: false
    max_outstanding_messages: 1000
    max_outstanding_bytes: 1e+09
    create_subscription:
      enabled: false
      topic: ""
    credentials_path: "" # No default (optional)
    credentials_json: ""
    credentials:
      type: service_account
      project_id: "" # No default (required)
      private_key_id: "" # No default (required)
      private_key: "" # No default (required)
      client_email: "" # No default (required)
      client_id: "" # No default (required)
      auth_uri: https://accounts.google.com/o/oauth2/auth
      token_uri: https://oauth2.googleapis.com/token
      auth_provider_x509_cert_url: https://www.googleapis.com/oauth2/v1/certs
      client_x509_cert_url: "" # No default (required)
```

--
======

For information on how to set up credentials see https://cloud.google.com/docs/authentication/production[this guide^].

== Metadata

This input adds the following metadata fields to each message:

- gcp_pubsub_publish_time_unix - The time at which the message was published to the topic.
- gcp_pubsub_delivery_attempt - When dead lettering is enabled, this is set to the number of times PubSub has attempted to deliver a message.
- gcp_pubsub_message_id - The unique identifier of the message.
- gcp_pubsub_ordering_key - The ordering key of the message.
- All message attributes

You can access these metadata fields using xref:configuration:interpolation.adoc#bloblang-queries[function interpolation].


== Fields

=== `project`

The project ID of the target subscription.


*Type*: `string`


=== `subscription`

The target subscription ID.


*Type*: `string`


=== `endpoint`

An optional endpoint to override the default of `pubsub.googleapis.com:443`. This can be used to connect to a region specific pubsub endpoint. For a list of valid values, see https://cloud.google.com/pubsub/docs/reference/service_apis_overview#list_of_regional_endpoints[this document^].


*Type*: `string`

*Default*: `""`

```yml
# Examples

endpoint: us-central1-pubsub.googleapis.com:443

endpoint: us-west3-pubsub.googleapis.com:443
```

=== `sync`

Enable synchronous pull mode.


*Type*: `bool`

*Default*: `false`

=== `max_outstanding_messages`

The maximum number of outstanding pending messages to be consumed at a given time.


*Type*: `int`

*Default*: `1000`

=== `max_outstanding_bytes`

The maximum number of outstanding pending messages to be consumed measured in bytes.


*Type*: `int`

*Default*: `1000000000`

=== `create_subscription`

Allows you to configure the input subscription and creates if it doesn't exist.


*Type*: `object`


=== `create_subscription.enabled`

Whether to configure subscription or not.


*Type*: `bool`

*Default*: `false`

=== `create_subscription.topic`

Defines the topic that the subscription should be vinculated to.


*Type*: `string`

*Default*: `""`

=== `credentials_path`

The path for custom credentials of Google Cloud. This is checked first and takes precedence over other credential methods.
[CAUTION]
====
This field contains sensitive information that usually shouldn't be added to a config directly, read our xref:configuration:secrets.adoc[secrets page for more info].
====



*Type*: `string`


=== `credentials_json`

An optional field to set Google Service Account Credentials json. This is checked second, after credentials_path.
[CAUTION]
====
This field contains sensitive information that usually shouldn't be added to a config directly, read our xref:configuration:secrets.adoc[secrets page for more info].
====



*Type*: `string`

*Default*: `""`

=== `credentials`

Optional manual configuration of Google Cloud credentials to use. This is checked last, after credentials_path and credentials_json. More information can be found [in this document](/docs/guides/cloud/gcp).
[CAUTION]
====
This field contains sensitive information that usually shouldn't be added to a config directly, read our xref:configuration:secrets.adoc[secrets page for more info].
====



*Type*: `object`


=== `credentials.type`

The type of the account (always "service_account" for a service account).


*Type*: `string`

*Default*: `"service_account"`

=== `credentials.project_id`

The ID of your Google Cloud project.


*Type*: `string`


=== `credentials.private_key_id`

The ID of your private key.
[CAUTION]
====
This field contains sensitive information that usually shouldn't be added to a config directly, read our xref:configuration:secrets.adoc[secrets page for more info].
====



*Type*: `string`


=== `credentials.private_key`

Your private key.
[CAUTION]
====
This field contains sensitive information that usually shouldn't be added to a config directly, read our xref:configuration:secrets.adoc[secrets page for more info].
====



*Type*: `string`


=== `credentials.client_email`

The email address of your service account.
[CAUTION]
====
This field contains sensitive information that usually shouldn't be added to a config directly, read our xref:configuration:secrets.adoc[secrets page for more info].
====



*Type*: `string`


=== `credentials.client_id`

The ID of your service account.
[CAUTION]
====
This field contains sensitive information that usually shouldn't be added to a config directly, read our xref:configuration:secrets.adoc[secrets page for more info].
====



*Type*: `string`


=== `credentials.auth_uri`

The URI for OAuth2 authorization.


*Type*: `string`

*Default*: `"https://accounts.google.com/o/oauth2/auth"`

=== `credentials.token_uri`

The URI that provides the OAuth2 tokens.


*Type*: `string`

*Default*: `"https://oauth2.googleapis.com/token"`

=== `credentials.auth_provider_x509_cert_url`

The URL of the authentication provider's X.509 public key certificate.


*Type*: `string`

*Default*: `"https://www.googleapis.com/oauth2/v1/certs"`

=== `credentials.client_x509_cert_url`

The URL of the service account's X.509 public key certificate. Typically: https://www.googleapis.com/robot/v1/metadata/x509/your-service-account-email%40your-project-id.iam.gserviceaccount.com
[CAUTION]
====
This field contains sensitive information that usually shouldn't be added to a config directly, read our xref:configuration:secrets.adoc[secrets page for more info].
====



*Type*: `string`



